<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>毕业设计 | JONE-MARK</title><meta name="description" content="毕业设计"><meta name="keywords" content=""><meta name="author" content="Jone-Mark"><meta name="copyright" content="Jone-Mark"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon1.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://94.191.80.102:4000/2019/11/01/graduation-project/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="毕业设计"><meta name="twitter:description" content="毕业设计"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><meta property="og:type" content="article"><meta property="og:title" content="毕业设计"><meta property="og:url" content="http://94.191.80.102:4000/2019/11/01/graduation-project/"><meta property="og:site_name" content="JONE-MARK"><meta property="og:description" content="毕业设计"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="next" title="智慧农场系统" href="http://94.191.80.102:4000/2019/10/31/%E6%99%BA%E6%85%A7%E5%86%9C%E5%9C%BA%E7%89%A9%E8%81%94%E7%BD%91%E6%A8%A1%E5%9E%8B/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    title: 'Bookmark',
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  copyright: undefined,
  copy_copyright_js: false
  
}</script></head><body><canvas class="fireworks"></canvas><div id="header"> <div id="page-header"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">JONE-MARK</a></span><i class="fa fa-bars fa-fw toggle-menu pull-right close" aria-hidden="true"></i><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/2019/11/01/graduation-project/"><i class="fa-fw fa fa-tags"></i><span> 毕业设计</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-gallery"></i><span> Gallery</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right" id="search_button"></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lozad avatar_img" src="/img/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">5</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/2019/11/01/graduation-project/"><i class="fa-fw fa fa-tags"></i><span> 毕业设计</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> About</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> List</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> Movie</span></a></li><li><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-gallery"></i><span> Gallery</span></a></li></ul></div><script>document.body.addEventListener('touchstart', function(){ });</script></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">Catalog</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#摘-要"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">摘 要</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#引-言"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">引  言</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#方案的选择与设计"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">方案的选择与设计 </span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#系统总体设计方案"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">系统总体设计方案</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#多个传感器节点采集方案"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">多个传感器节点采集方案</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#网络方案"><span class="toc_mobile_items-number">3.3.</span> <span class="toc_mobile_items-text">网络方案</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#视频采集方案"><span class="toc_mobile_items-number">3.4.</span> <span class="toc_mobile_items-text">视频采集方案</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#硬件设计与实现"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">硬件设计与实现 </span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#节点设计"><span class="toc_mobile_items-number">4.1.</span> <span class="toc_mobile_items-text">节点设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#传感器节点设计"><span class="toc_mobile_items-number">4.2.</span> <span class="toc_mobile_items-text">传感器节点设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#光照传感器节点"><span class="toc_mobile_items-number">4.3.</span> <span class="toc_mobile_items-text">光照传感器节点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#温湿度传感器节点"><span class="toc_mobile_items-number">4.4.</span> <span class="toc_mobile_items-text">温湿度传感器节点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#CO2传感器节点"><span class="toc_mobile_items-number">4.5.</span> <span class="toc_mobile_items-text">CO2传感器节点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#土壤湿度传感器节点"><span class="toc_mobile_items-number">4.6.</span> <span class="toc_mobile_items-text">土壤湿度传感器节点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#控制器节点设计"><span class="toc_mobile_items-number">4.7.</span> <span class="toc_mobile_items-text">控制器节点设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#灌溉节点"><span class="toc_mobile_items-number">4.8.</span> <span class="toc_mobile_items-text">灌溉节点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#照明节点"><span class="toc_mobile_items-number">4.9.</span> <span class="toc_mobile_items-text">照明节点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#通风节点"><span class="toc_mobile_items-number">4.10.</span> <span class="toc_mobile_items-text">通风节点</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#协调器网关设计"><span class="toc_mobile_items-number">4.11.</span> <span class="toc_mobile_items-text">协调器网关设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#协调器设计"><span class="toc_mobile_items-number">4.12.</span> <span class="toc_mobile_items-text">协调器设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-2-2-WIFI网关设计"><span class="toc_mobile_items-number">4.13.</span> <span class="toc_mobile_items-text">2.2.2 WIFI网关设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#图像传输设计"><span class="toc_mobile_items-number">4.14.</span> <span class="toc_mobile_items-text">图像传输设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#电源模块设计"><span class="toc_mobile_items-number">4.15.</span> <span class="toc_mobile_items-text">电源模块设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#智慧农场沙盘设计"><span class="toc_mobile_items-number">4.16.</span> <span class="toc_mobile_items-text">智慧农场沙盘设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#沙盘外壳制作"><span class="toc_mobile_items-number">4.17.</span> <span class="toc_mobile_items-text">沙盘外壳制作</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#元器件支架的制作"><span class="toc_mobile_items-number">4.18.</span> <span class="toc_mobile_items-text">元器件支架的制作</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#软件设计与实现"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">软件设计与实现</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#下位机系统软件设计"><span class="toc_mobile_items-number">5.1.</span> <span class="toc_mobile_items-text">下位机系统软件设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#传感器节点软件设计"><span class="toc_mobile_items-number">5.2.</span> <span class="toc_mobile_items-text">传感器节点软件设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#控制器节点部分软件设计"><span class="toc_mobile_items-number">5.3.</span> <span class="toc_mobile_items-text">控制器节点部分软件设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#网关协调器软件设计"><span class="toc_mobile_items-number">5.4.</span> <span class="toc_mobile_items-text">网关协调器软件设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#上位机软件设计"><span class="toc_mobile_items-number">5.5.</span> <span class="toc_mobile_items-text">上位机软件设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#物联网服务器的选择与设计"><span class="toc_mobile_items-number">5.6.</span> <span class="toc_mobile_items-text">物联网服务器的选择与设计</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#PC上位机的软件开发"><span class="toc_mobile_items-number">5.7.</span> <span class="toc_mobile_items-text">PC上位机的软件开发</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#Android-软件开发"><span class="toc_mobile_items-number">5.8.</span> <span class="toc_mobile_items-text">Android 软件开发</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#调试及调试结果"><span class="toc_mobile_items-number">6.</span> <span class="toc_mobile_items-text">调试及调试结果 </span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#结-论"><span class="toc_mobile_items-number">7.</span> <span class="toc_mobile_items-text">结 论</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#致-谢"><span class="toc_mobile_items-number">8.</span> <span class="toc_mobile_items-text">致 谢</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#参考文献"><span class="toc_mobile_items-number">9.</span> <span class="toc_mobile_items-text">参考文献</span></a></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#摘-要"><span class="toc-number">1.</span> <span class="toc-text">摘 要</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#引-言"><span class="toc-number">2.</span> <span class="toc-text">引  言</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#方案的选择与设计"><span class="toc-number">3.</span> <span class="toc-text">方案的选择与设计 </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#系统总体设计方案"><span class="toc-number">3.1.</span> <span class="toc-text">系统总体设计方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多个传感器节点采集方案"><span class="toc-number">3.2.</span> <span class="toc-text">多个传感器节点采集方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#网络方案"><span class="toc-number">3.3.</span> <span class="toc-text">网络方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#视频采集方案"><span class="toc-number">3.4.</span> <span class="toc-text">视频采集方案</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#硬件设计与实现"><span class="toc-number">4.</span> <span class="toc-text">硬件设计与实现 </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#节点设计"><span class="toc-number">4.1.</span> <span class="toc-text">节点设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#传感器节点设计"><span class="toc-number">4.2.</span> <span class="toc-text">传感器节点设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#光照传感器节点"><span class="toc-number">4.3.</span> <span class="toc-text">光照传感器节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#温湿度传感器节点"><span class="toc-number">4.4.</span> <span class="toc-text">温湿度传感器节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CO2传感器节点"><span class="toc-number">4.5.</span> <span class="toc-text">CO2传感器节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#土壤湿度传感器节点"><span class="toc-number">4.6.</span> <span class="toc-text">土壤湿度传感器节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#控制器节点设计"><span class="toc-number">4.7.</span> <span class="toc-text">控制器节点设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#灌溉节点"><span class="toc-number">4.8.</span> <span class="toc-text">灌溉节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#照明节点"><span class="toc-number">4.9.</span> <span class="toc-text">照明节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通风节点"><span class="toc-number">4.10.</span> <span class="toc-text">通风节点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#协调器网关设计"><span class="toc-number">4.11.</span> <span class="toc-text">协调器网关设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#协调器设计"><span class="toc-number">4.12.</span> <span class="toc-text">协调器设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-2-WIFI网关设计"><span class="toc-number">4.13.</span> <span class="toc-text">2.2.2 WIFI网关设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#图像传输设计"><span class="toc-number">4.14.</span> <span class="toc-text">图像传输设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#电源模块设计"><span class="toc-number">4.15.</span> <span class="toc-text">电源模块设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#智慧农场沙盘设计"><span class="toc-number">4.16.</span> <span class="toc-text">智慧农场沙盘设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#沙盘外壳制作"><span class="toc-number">4.17.</span> <span class="toc-text">沙盘外壳制作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#元器件支架的制作"><span class="toc-number">4.18.</span> <span class="toc-text">元器件支架的制作</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#软件设计与实现"><span class="toc-number">5.</span> <span class="toc-text">软件设计与实现</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#下位机系统软件设计"><span class="toc-number">5.1.</span> <span class="toc-text">下位机系统软件设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#传感器节点软件设计"><span class="toc-number">5.2.</span> <span class="toc-text">传感器节点软件设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#控制器节点部分软件设计"><span class="toc-number">5.3.</span> <span class="toc-text">控制器节点部分软件设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#网关协调器软件设计"><span class="toc-number">5.4.</span> <span class="toc-text">网关协调器软件设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#上位机软件设计"><span class="toc-number">5.5.</span> <span class="toc-text">上位机软件设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#物联网服务器的选择与设计"><span class="toc-number">5.6.</span> <span class="toc-text">物联网服务器的选择与设计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PC上位机的软件开发"><span class="toc-number">5.7.</span> <span class="toc-text">PC上位机的软件开发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Android-软件开发"><span class="toc-number">5.8.</span> <span class="toc-text">Android 软件开发</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#调试及调试结果"><span class="toc-number">6.</span> <span class="toc-text">调试及调试结果 </span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#结-论"><span class="toc-number">7.</span> <span class="toc-text">结 论</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#致-谢"><span class="toc-number">8.</span> <span class="toc-text">致 谢</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考文献"><span class="toc-number">9.</span> <span class="toc-text">参考文献</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png)"><div id="post-info"><div id="post-title"><div class="posttitle">毕业设计</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2019-11-01<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> Updated 2019-11-01</time><div class="post-meta-wordcount"><span>Post View: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="摘-要"><a href="#摘-要" class="headerlink" title="摘 要"></a>摘 要</h1><p>本毕业设计基于传感器技术、Zigbee技术、计算机网络技术设计并实现了现代智慧农场系统。系统由下位机信息采集和上位机信息处理两大部分构成。<br>下位机由传感器模块，数据处理模块，数据传输模块等构成。上位机由服务器， 安卓客户端以及 H5 界面组成。共同实现农场环境数据的采集、存储，显示、控制和视频监测等功能。基本过程为传感器采集信息，STM32 单片机处理底层数据，通过Zigbee节点发送到协调器网关；网关通过WIFI模块与云端服务器建立MQTT网络链接，将多个传感器数据发送到物联网云平台进行存储，在安卓端和PC端实时访问农场传感器数据和对农场现场进行控制。<br>通过该系统，可以实时监测和控制农场环境变化，从而有效的控制植物生长，达到科学管理的效果。</p>
<p><strong>关键词：  传感器  无线网络  远程控制  智慧农场</strong></p>
<hr>
<h1 id="引-言"><a href="#引-言" class="headerlink" title="引  言"></a>引  言</h1><p>随着我国的工业化进程不断加快，农业作为我国的第一产业支撑着8亿人口的生活，农业与国民经济的协调发展成为当代人面临的重大课题。十九大提出了要大力发展农业。目前我国农业发展技术水平不够高，还用着传统的农业耕种方式，所以农业信息化的发展模式从技术层面和服务层面都不够清晰和明确。<br>智慧农业是集物联网，互联网计算机技术等发展农业生产的新的理念，可以解决我国现阶段农业发展面临的经济发展和农村资源有限矛盾、食品安全问题、农业生产效率落后于发达国家的问题，从而助推农业加速腾飞。<br>此次设计的现代智慧农场的实现是结合国内外物联网解决情况而提出的。智慧农场的智能监控系统具有传感数据多样性，远程监控智能性，管理科学性等特点。实现农场管理智能化，让用户不用去田间，随时随地通过手机 APP 就可以实现农场生产的实时监控，对于农场大棚农作物生长做到充分放心。 </p>
<hr>
<h1 id="方案的选择与设计"><a href="#方案的选择与设计" class="headerlink" title="方案的选择与设计 "></a>方案的选择与设计 </h1><p>本系统根据农业生产的实际情况设计了系统的总方案；也对物联网架构的各个部分方案的进行了对比并确定最终采用的方案，同时设计了方案的具体流程图，对方案进行了说明。</p>
<hr>
<h2 id="系统总体设计方案"><a href="#系统总体设计方案" class="headerlink" title="系统总体设计方案"></a>系统总体设计方案</h2><p><img alt="图 1.1 系统方案总图" data-src="http://94.191.80.102/bishe/1.1.png" class="lozad"></p>
<p>本系统采用物联网的三层架构：感知层负责采集底层传感器数据，是“眼睛”和“耳朵”；传输层负责传感器和服务器之间的信息传递，是“神经网络”；应用层负责数据的分析以及最终的数据展示和操作，是“大脑”和“双手”。在各层之间，有上传数据、和下行控制等，所传递的信息多种多样，传输的方式也多种多样。<br>感知层用四个节点，分别为光照，温湿度，土壤湿度，CO2 浓度传感器，经过Zigbee 节点短距离通信到 Zigbee 接收协调器端，接收协调器通过串口将数据给到STM32 网关，将数据整理打包后通过 Wifi 和以太网传输到云服务器，最终在客户端显示各个类型的传感器数据。<br>同理，应用层客户端发送控制指令，通过以太网和 wifi 网络，发送到 STM32 网关，STM32 网关解析数据包，通过 Zigbee 发送协调器发送到各个控制器节点，控制大棚环境参数。</p>
<hr>
<h2 id="多个传感器节点采集方案"><a href="#多个传感器节点采集方案" class="headerlink" title="多个传感器节点采集方案"></a>多个传感器节点采集方案</h2><p>考虑到此系统主要采集大棚温湿度，土壤湿度，光照和可燃气体等数据；要通过控制灌溉，灯光，和排气来达到我们所想要的控制功能，底层传感器数量多。所以考虑采用多个终端传感器数据通过无线网络方式传输到一个协调器上进行数据的集中处理。</p>
<ul>
<li>方案一：采用蓝牙方式作为底层传输数据的方案，各个传感器节点用蓝牙节点和蓝牙协调器进行数据交互。具体芯片选择 NRF51822,该芯片满足一对多要求，温度范围-40°~80°，可以应用于多个底层传感器传输到协调器的短距离网络通信。  </li>
</ul>
<blockquote>
<p>优点：<br>1.温度适应范围广；<br>2.全功能数字接口<br>缺点:<br>1.功耗大；<br>2.满足不了数量庞大的节点与协调器通信，组网规模小；<br>3.通信距离较短；<br>4.价格高。</p>
</blockquote>
<ul>
<li>方案二：Zigbee采集传感器并且传输数据的方案。具体芯片选择CC2530，该芯片工作频段为2.4GHz ，空旷环境传输范围可达100m，可以应用于多个底层传感器传输到协调器的短距离网络通信  </li>
</ul>
<blockquote>
<p>优点：<br>1.功率较小；<br>2.组网规模大，一个协调器可与上百 Zigbee 节点通信；<br>3.成本低；<br>4.安全性好。<br>缺点：传输速率较低  </p>
</blockquote>
<p>综合考虑到实际农业大棚生产中，低层本，功耗较小，组网规模大的特点，采用方案二，用Zigbee技术作为底层传感器的采集和传输方案，使用Zigbee对多个传感器采集数据同时也通过协调器对相应节点进行控制达到科学管理的效果。底层数据多个传感器节点向协调器发送数据，协调器也可以向控制器节点发送控制指令。</p>
<hr>
<h2 id="网络方案"><a href="#网络方案" class="headerlink" title="网络方案"></a>网络方案</h2><p><img alt="图 1.2 节点方案" data-src="http://94.191.80.102/bishe/1.2.png" class="lozad"></p>
<p>考虑最终数据需要上传到云服务器，底层下位机使用 MQTT 协议与服务器进行交互。</p>
<ul>
<li>方案一：底层数据向服务器传输数据使用 GPRS；</li>
</ul>
<blockquote>
<p>优点：采用传输范围广，覆盖面大，可移动性高；<br>缺点：2G 网络传输速率较低，不能及时传输比较大的数据量，受外界干扰情况明显信号不稳定。</p>
</blockquote>
<ul>
<li>方案二：采用 WIFI 在局域网内组网，方便控制，通过wifi进行整个系统大的连接。 </li>
</ul>
<p>此方案的特点是数据从底层硬件到上层服务器的数据通信速率大、信号稳定、网络延迟小。但是 WiFi 传输距离小，并且覆盖面积有限。<br>由于本系统要传输图片或者视频流，WIFI信号强，并且实际生产中，农业大棚是固定的场所，不必经常移动，没有必要用GPRS，所以采用 WIFI 方案。特点是可以在网络条件差的环境中也可以保持图像数据和大量传感器数据的正常传输，保证系统的正常运作，而且 GPRS 信号不是特别稳定，传输图片消费流量比较大，成本较高， 采用 WIFI 模式可以保证系统的稳定运行。<br>为了保证系统的兼容性，所以PC端编写H5上位机，安卓端编写APP，保证客户可以随时观测农场情况。<br>Zigbee协调器接收到Zigbee节点发过来的信息之后；进行数据格式的处理，然后上传路由器，路由器再通过以太网与云服务器交换信息，将数据存储在云服务器中。安卓端和H5客户端编写网络程序对云服务器数据操作，就可以实现网络远程操作的功能了。</p>
<p><img alt="图 1.3 网络方案设计" data-src="http://94.191.80.102/bishe/1.3.png" class="lozad"></p>
<hr>
<h2 id="视频采集方案"><a href="#视频采集方案" class="headerlink" title="视频采集方案"></a>视频采集方案</h2><ul>
<li>方案一:采用 STM32F103ZET6 加 OV7060 摄像头采集模块采集图像。 </li>
</ul>
<p>在调试过程中发现 OV7060 采集图像较为模糊，大小只有 100K，虽然可以上传服务器观看，但是用户体验度较差。在农业观测中一般要观测植物的具体生长情况， 以方便做出科学决策，所以要求视频和图像要比较清晰。OV7060 采集图像占用单片机内存较大，所以要用到 SD 卡，传输图片到网络相关编程较为复杂。</p>
<ul>
<li>方案二：树莓派Camera 采集图像，再通过树莓派自带 WIFI 模块上传。 </li>
</ul>
<p>树莓派可以运行LINUX的Debian系统；并且自带Python软件，用Python调用树莓派的Camera采集图像，然后上传到云服务器。<br>在试验方案的论证过程中，验证得到树莓派摄像头采集图像可通过编程改变像素大小；最大可达到 1920*1080 的大小，图片为很高清的图片。<br>Linux下Python传输图片程序较为简单，相比两种方案，所以最终采用方案二，使用树莓派采集图像并且上传到服务器显示。</p>
<hr>
<h1 id="硬件设计与实现"><a href="#硬件设计与实现" class="headerlink" title="硬件设计与实现 "></a>硬件设计与实现 </h1><p>本部分主要讲述了硬件部分的设计思路和具体实现。包括节点部分，协调器与网关部分，采集图像部分，电源模块部分，沙盘模型制作部分。 </p>
<hr>
<h2 id="节点设计"><a href="#节点设计" class="headerlink" title="节点设计"></a>节点设计</h2><p>Zigbee节点组网容量大，理论上一个协调器可以收集200个以上节点信息；本课题用作模型演示，在下位机采用八个Zigbee节点，其中四个为传感器节点，采集农场相关环境数据；四个为控制器节点，控制农场终端电器，数据交互使农场环境科学合理管理。</p>
<hr>
<h2 id="传感器节点设计"><a href="#传感器节点设计" class="headerlink" title="传感器节点设计"></a>传感器节点设计</h2><p>传感器节点总共 4 个，分别为光照传感器节点；温湿度传感器节点；土壤湿度传感器节点；CO2传感器节点。</p>
<p><img alt="图2.1 传感器节点PCB图" data-src="http://94.191.80.102/bishe/2.1.png" class="lozad"></p>
<p>传感器节点硬件原理图如上图所示，开发软件环境为Altium Designer软件。Altium Designer是原Protel软件开发商Altium公司推出的一体化的电子产品开发系统，主要运行在 Windows 操作系统。这套软件通过把原理图设计、电路仿真、PCB 绘制编辑、拓扑逻辑自动布线、信号完整性分析和设计输出等技术的完美融合，为设计者提供了全新的设计解决方案，使设计者可以轻松进行设计，熟练使用这一软件必将使电路设计的质量和效率大大提高。<br>核心处理器采用 STM32F103C8T6，STM32F103C8T6 是一款基于ARM Cortex-M内核STM32系列的32位的微控制器，程序存储器容量是64KB，需要电压 2V~3.6V。此芯片成本低，IO口扩展相对较多，板载资源丰富，有PWM，ADC，I2C和串口等丰富接口；在工业生产和电子产品中都有大规模应用，所以本毕业设计采用了这一款芯片作为下位机节点的数据采集和数据交互芯片。<br>因为节点传感器只需要采集几个简单的传感器数据，所以在原理图绘制中只绘制了STM32 最小系统包括核心处理器。传感器节点模块5V 电压输入，经过AMS1117-3.3 降压模块，将电压转换成 STM32f103c8t6 芯片所需要的电压。STM32 核心主板设计外围电路有复位按键，LED 指示灯，BOOT 下载开关选择，SW 下载接口，和传感器接口的部分。<br>本毕业设计有四个传感器节点，每个传感器节点都有采集四种类型传感器数据和发送数据的功能，在最终实物上只需要接插不同的传感器数据和不同的 Zigbee 节点就好了。<br>在 PCB 硬件设计上，将所有传感器的接口和位置都留出来，焊接不同位置，就可以实现同一块 PCB 采集不同数据的方式了。本设计布线科学合理，PCB 设计为双层板，因为电路较为简单，不考虑信号隔离等因素。PCB 设计整齐美观大方，而且实用，经焊接测试可以采集数据，正常工作。</p>
<p><img alt="图2.1 传感器节点PCB图" data-src="http://94.191.80.102/bishe/2.2.png" class="lozad"></p>
<hr>
<h2 id="光照传感器节点"><a href="#光照传感器节点" class="headerlink" title="光照传感器节点"></a>光照传感器节点</h2><p>BH1750 环境光传感器内置 16 位的模数转换器，它能够直接输出一个数字信号， 不需要再做复杂的计算。这是一种更精良的和容易使用简易电阻器的版本，通过计算电压,来获得有效的数据。<br>这款环境光传感器能够直接通过光度计来测量。光强度的单位是流明”lx”。当物体在均匀的光照下它能够在每平方米获得 1lx 的光通量，它们的光强度是 1lx。<br>STM32 的 PA0 和 PA1 两个 I/O 口通过 I2C 方式采集 BH1750 传感器数据，经过数据处理转换，最后通过 STM32 串口一（PA9,PA10）发送到 Zigbee 节点，Zigbee 节点与 Zigbee 协调器短距离无线组网；将光照数据无线短距离通信传送到协调器， 完成数据的传输。</p>
<p><img alt="图2.3 光照传感器节点实物图" data-src="http://94.191.80.102/bishe/2.3.png" class="lozad"></p>
<hr>
<h2 id="温湿度传感器节点"><a href="#温湿度传感器节点" class="headerlink" title="温湿度传感器节点"></a>温湿度传感器节点</h2><p>温湿度采集选用 DHT11 温湿度模块，DHT11 数字温湿度传感器是一款含有已校准数字信号输出的温湿度复合传感器，传感器包括一个电阻式感湿元件和一个 NTC 测温元件，并与一个高性能 8 位单片机相连接。因此该产品具有品质卓越、超快响应、抗干扰能力强、性价比极高等优点。<br>每个 DHT11 传感器都在极为精确的湿度校验室中进行校准。校准系数以程序的形式存在 OTP 内存中，传感器内部在检测信号的处理过程中要调用这些校准系数。单线制串行接口，使系统集成变得简易快捷。超小的体积、极低的功耗，使其成为该类应用中，在苛刻应用场合的最佳选择。产品为 4 针单排引脚封装，连接方便。<br>DHT11 成本低，操作简单，并且稳定。在日常生活上和工业生产中都有大量应用。<br>STM32 的 PA5 这个 I/O 口通过单总线方式采集 DHT11 温湿度传感器数据，经过数据处理转换，最后通过 STM32 串口一（PA9,PA10）发送到 Zigbee 节点，Zigbee 节点与 Zigbee 协调器短距离无线组网；将光照数据无线短距离通信传送到协调器,完成数据的传输。</p>
<p><img alt="图2.4 DHT11传感器节点实物图" data-src="http://94.191.80.102/bishe/2.4.png" class="lozad"></p>
<hr>
<h2 id="CO2传感器节点"><a href="#CO2传感器节点" class="headerlink" title="CO2传感器节点"></a>CO2传感器节点</h2><p>因为农业大棚植物的生长需要光合作用，吸收 CO2 来产生养料|，所以 CO2 的浓度也是要测量的，CO2 的采集选用 MH-Z19 二氧化碳气体传感器。<br>MH-Z19 二氧化碳气体传感器是一个通用型、小型传感器，利用非色散红外（NDIR）原理对空气中存在的 CO 2 进行探测，具有很好的选择性，无氧气依赖性， 寿命长。内置温度补偿；该传感器是将成熟的红外吸收气体检测技术与精密光路设计、精良电路设计紧密结合而制作出的高性能传感器。<br>STM32 的串口二（PA2 和 PA3）这个通过串口方式采 MH-Z19 CO2 传感器数据， 经过数据处理转换，最后通过 STM32 串口一（PA9,PA10）发送到 Zigbee 节点，节点与协调器短距离组网；将 CO2 数据传送到协调器，完成 CO2 数据的传输。CO2 传感器低功耗，工作比较稳定稳定性；在生活中空气质量监控应用十分广泛。</p>
<p><img alt="图2.5 CO2传感器节点实物图" data-src="http://94.191.80.102/bishe/2.5.png" class="lozad"></p>
<hr>
<h2 id="土壤湿度传感器节点"><a href="#土壤湿度传感器节点" class="headerlink" title="土壤湿度传感器节点"></a>土壤湿度传感器节点</h2><p>农业生产中经常要确定植物生长是否缺水，所以我们要检测土壤湿度。选型为TELESKY 土壤湿度传感器。<br>传感器有两个输出量，一个是开关变量电压，一个是模拟信号电压。当土壤比较湿的时候，模块的数字管脚会输出低电压，模块的模拟管脚会有线性变化的电压。干燥时候数字口输出高电压，模拟管脚输出低电压。数字管脚可以与单片机直接相连。<br>通过单片机来检测高低电平，由此来检测土壤湿度；模拟管脚可以和单片机数字转模拟管脚模块相连，通过模数转换，可以获得土壤湿度更精确的数值，本设计采用模拟管脚检测传感器土壤湿度情况。</p>
<p><img alt="图2.6 土壤湿度传感器节点实物图" data-src="http://94.191.80.102/bishe/2.6.png" class="lozad"></p>
<hr>
<h2 id="控制器节点设计"><a href="#控制器节点设计" class="headerlink" title="控制器节点设计"></a>控制器节点设计</h2><p>控制器节点总共有四个，三个不同的类型，其中有一个灌溉，两个照明和一个排气节点；四个控制器来改变农业大棚内光照，温湿度，和气压状况，使农业大棚中的农作物更好地生长。<br>在经过查找资料后，选用了 IRLR7843NMOS 管，该 NMOS 的 Vgs 导通电压最小为为 1.5V 最大 2.3V，Vds 为 15V；I（D）为 12A。我们的所有控制电器为 12V， Zigbee 引脚低电平为 0V，高电平为 5V；完全满足功率等要求。所以选用该 NMOS。</p>
<p><img alt="图2.7 控制器节点原理图" data-src="http://94.191.80.102/bishe/2.7.png" class="lozad"></p>
<p>当不同 Zigbee 节点收到指令时；该节点 P05 管脚给高低电平，高电平时，栅极（G）为高电压，源极（S）和漏极（D）之间导通。P2 上用电器电压变为 12V，电器开始工作；反之 Zigbee 的 P05 管脚为低电平时；NOMS 不导通，P2 接插件上没有压降，电器不工作。<br>由于四个节点的控制器都是开关类型电器，本质上是完全一样的。所以四个控制器节点在硬件 PCB 上用相同电路，通过对 Zigbee 节点编号进行不同节点控制；由于植物照明灯，抽水电机，和风扇都是功率和电压相对较大的电器，所以采用 NMOS 开关电路；MOS 管可功率大，我们只应用开关特性，栅源电压 uGS 决定其工作状态。</p>
<p><img alt="图2.8 控制器节点PCB图" data-src="http://94.191.80.102/bishe/2.8.png" class="lozad"></p>
<p>NMOS 的特性，Vgs 大于一定的值就会导通，适合用于源极接地时的情况（低端驱动），只要栅极电压大于参数手册中给定的 Vgs 就可以了，漏极 D 接电源，源极 S 接地。需要注意的是 Vgs 指的是栅极 G 与源极 S 的压差，所以当 NMOS 作为高端驱动时候，当漏极 D 与源极 S 导通时，漏极 D 与源极 S 电势相等，那么栅极 G 必须高于源极 S 与漏极 D 电压，漏极 D 与源极 S 才能继续导通。</p>
<p><img alt="图2.9 控制器节点实物图" data-src="http://94.191.80.102/bishe/2.9.png" class="lozad"></p>
<hr>
<h2 id="灌溉节点"><a href="#灌溉节点" class="headerlink" title="灌溉节点"></a>灌溉节点</h2><p>灌溉节点 12V 电压供电；经过 AMS1117-5.0 转为 5V 给 Zigbee 节点供电，Zigbee 节点接收到灌溉指令后，NOMS 栅极为高电平，电路形成回路，12V 抽水机开始工作， 给植物进行灌溉浇水。<br>抽水电机为直流电机，通过电机转动，抽调排气室空气，可以使水流能从抽水管流出。</p>
<p><img alt="图2.10 灌溉节点抽水机实物图" data-src="http://94.191.80.102/bishe/2.10.png" class="lozad"></p>
<hr>
<h2 id="照明节点"><a href="#照明节点" class="headerlink" title="照明节点"></a>照明节点</h2><p>照明节点有两个，为植物专用照明红蓝灯，由不同的 Zigbee 节点进行控制。照明节点 12V 电压供电；经过 AMS1117-5.0 转为 5V 给 Zigbee 节点供电，Zigbee 节点接收到不同编号的照明指令后，NOMS 栅极为高电平，电路形成回路，12V 植物灯开始工作，给植物进行照明。</p>
<p><img alt="图2.11 光照节点植物灯实物图" data-src="http://94.191.80.102/bishe/2.11.png" class="lozad"></p>
<hr>
<h2 id="通风节点"><a href="#通风节点" class="headerlink" title="通风节点"></a>通风节点</h2><p>农业大棚内空气的浓度对植物生长影响比较大，所以需要经常排气或者送气。本设计采用一个 12V 的小风扇来模拟真实大棚的排送气系统。<br>风扇节点 12V 电压供电；经过 AMS1117-5.0 转为 5V 给 Zigbee 节点供电，Zigbee 节点接收到排气指令后，NOMS 栅极为高电平，电路形成回路，12V 排气扇开始工作， 给植物进行排气和送气。</p>
<hr>
<h2 id="协调器网关设计"><a href="#协调器网关设计" class="headerlink" title="协调器网关设计"></a>协调器网关设计</h2><p><img alt="图2.12 排气节点风扇实物图" data-src="http://94.191.80.102/bishe/2.12.png" class="lozad"></p>
<p>协调器网关部分核心处理器为 STM32f103ZET6。STM32f103ZET6 特点是增强型,32 位基于 ARM 核心的带 512K 字节闪存的微控制器 有 USB、CAN、11 个定时器等丰富资源。因为想要在协调器网关一级添加显示界面，经过评估和测试，核心处理器采用STM32f103zet6,该芯片有 144 可用的引脚；足够大显示屏使用，此外 512K flash 也足够存储数量大的数据和程序。</p>
<p><img alt="图2.13 协调器网关实物图" data-src="http://94.191.80.102/bishe/2.13.png" class="lozad"></p>
<hr>
<h2 id="协调器设计"><a href="#协调器设计" class="headerlink" title="协调器设计"></a>协调器设计</h2><p>协调器部分又分为两个小部分，一个是接收协调器，负责接收 Zigbee 传感器四个节点上传的环境数据；一个是发送协调器，负责给四个控制节点发送下行数据，控制环境参数。<br>两个协调器与核心处理器 STM32 通过串口进行数据交互，占用了 STM32 的串口一，PA10 接传感器接收协调器，PA9 接发送控制协调器。</p>
<p><img alt="图2.14 协调器实物图" data-src="http://94.191.80.102/bishe/2.14.png" class="lozad"></p>
<hr>
<h2 id="2-2-2-WIFI网关设计"><a href="#2-2-2-WIFI网关设计" class="headerlink" title="2.2.2 WIFI网关设计"></a>2.2.2 WIFI网关设计</h2><p>网络通信模块采用 ESP8266  WIFI  串口模块， ATK-ESP8266  模块采用串口（LVTTL）与 MCU（或其他串口设备）通信，内置 TCP/IP 协议栈，能够实现串口与WIFI 之间的转换。<br>通过 ATK-ESP8266 模块，传统的串口设备只是需要简单的串口配置，即可通过网络 WIFI）传输自己的数据。ATK-ESP8266 模块支持 LVTTL 串口，兼容 3.3V 和 5V 单片机系统，可以很方便与单片机进行连接。从而快速构建串口-WIFI 数据传输方案， 方便我们的设备使用互联网传输数据。</p>
<p><img alt="图2.15 Wifi 网关实物图" data-src="http://94.191.80.102/bishe/2.15.png" class="lozad"></p>
<hr>
<h2 id="图像传输设计"><a href="#图像传输设计" class="headerlink" title="图像传输设计"></a>图像传输设计</h2><p>Raspberry Pi(中文名为“树莓派”) 是为学习计算机编程教育而设计，只有信用卡大小的微型电脑，其系统基于 Linux。<br>树莓派摄像头支持 1080p30,720p60 和 VGA90 视频模式，它通过一根 15 厘米的带状电缆连接到树莓派上的 CSI 端口。树莓派 Camera 对农场内部环境进行监控；因为树莓派供电情况是 5V 2A；设计的 PCB 供电板不足；不满足树莓派要求电流，会出现系统死机不能正常做工作的情况。所以考虑用仅有的 12V 开关电源降压后供电， 设计了电路，12V 直流电经过 12V 转 5V 降压模块可以为树莓派提供 2A 电流，使树莓派进行正常工作。</p>
<p><img alt="图2.16 树莓派摄像实物图" data-src="http://94.191.80.102/bishe/2.16.png" class="lozad"></p>
<hr>
<h2 id="电源模块设计"><a href="#电源模块设计" class="headerlink" title="电源模块设计"></a>电源模块设计</h2><p>系统设计多个较大功率的电器以及部分低电压器件，供电情况较为复杂。考虑到系统供电简洁性和合理性，供电电源采用 12V 开关电源作为供电源头。<br>制作 PCB 板供电模块，在原理图上 P1 管脚引入 12V 开关电源；12V 电压给到电机和灯管，经过 AMS1117 5.0 降压芯片将电压将为 5V，5V 电压给到传感器节点和协调器网关。</p>
<p><img alt="图2.17 电源供电板原理图" data-src="http://94.191.80.102/bishe/2.17.png" class="lozad"></p>
<p>PCB 电路板开关电源从左侧Power in 引入；开关 P2 导通后便可以提供五个 12V 的电压以及八个 5V 的电压。12V 线路线宽设计较粗，适用于功率大的大电流电器， 可以满足本系统用电工作情况。</p>
<p><img alt="图2.18 电源供电板PCB图" data-src="http://94.191.80.102/bishe/2.18.png" class="lozad"></p>
<hr>
<h2 id="智慧农场沙盘设计"><a href="#智慧农场沙盘设计" class="headerlink" title="智慧农场沙盘设计"></a>智慧农场沙盘设计</h2><p>考虑到本设计美观性和结构稳定性，所以外壳制作用比较工艺的方法。沙盘外壳制作采用 CAD 绘图，亚克力板为材料；元器件支撑采用 3Dmax 制作 3D 模型， MakerBot 打印实物模型。</p>
<hr>
<h2 id="沙盘外壳制作"><a href="#沙盘外壳制作" class="headerlink" title="沙盘外壳制作"></a>沙盘外壳制作</h2><p>沙盘外壳模型绘制采用AutoCAD绘制。AutoCAD(Autodesk Computer Aided Design)是 Autodesk（欧特克）公司首次于 1982 年开发的自动计算机辅助设计软件， 用于二维绘图、详细绘制、设计文档和基本三维设计，现已经成为国际上广为流行的绘图工具。AutoCAD 具有良好的用户界面，通过交互菜单或命令行方式便可以进行各种操作。<br>在设计外壳的时候，首先要对作品的大小有一个整体的概念，要知道自己的作品大概的大小是多少，如何设计才能使作品安排更加美观合理。<br>然后是具体设计，由于单个节点 PCB 板宽度为 5CM，结合多个传感器节点所占宽度以及其他器件所占位置，最终确定整个模型的长度为 80CM，高度为 50CM。<br>多个亚克力板之间连接采用螺丝和 L 型铁片固定，所以还要考虑到亚克力打孔的间距和数量。同时要注意某些电器比如风扇的固定，所以也要在侧板上做大小合适的正方形，打孔要精确到毫米级。</p>
<p><img alt="图2.19 CAD 绘制侧板图" data-src="http://94.191.80.102/bishe/2.19.png" class="lozad"></p>
<p>模型绘制完毕后，材质选择亚克力材料。亚克力材料是一种开发较早的重要可塑性高分子材料，具有较好的透明性、化学稳定性和耐候性、易染色、易加工、外观优美，在建筑业中有着广泛应用。</p>
<hr>
<h2 id="元器件支架的制作"><a href="#元器件支架的制作" class="headerlink" title="元器件支架的制作"></a>元器件支架的制作</h2><p>支架用 3Dmax 制作 3D 模型，3Dmax 是 Discreet 公司开发的（后被 Autodesk 公司合并）基于 PC 系统的三维动画渲染和制作软件。在应用范围方面，广泛应用于广告、影视、工业设计、建筑设计、三维动画、多媒体制作、游戏、辅助教学以及工程可视化等领域。</p>
<p><img alt="图2.20 3Dmax制作3D模型图" data-src="http://94.191.80.102/bishe/2.20.png" class="lozad"></p>
<p>本毕业设计有部分元器件需要固定和支撑，采用 3DMAX 绘制 3D 模型。需要制作的 3D 模型有三种，一块协调器网关支架模型，三块后背支撑支架，两块节点支撑模型。绘制 3D 模型过程中需要考虑的有 PCB 板和 3D 模型大小匹配关系，支架受力情况，支架打孔与沙盘模型的的连接情况。<br>打印模型软件使用 Makerbot Replicator。Makerbot Replicator 是美国 Makerbot 公司于 2014 年 1 月 CES 大会上发布的 MakerBot 第五代产品之一，MakerBot Replicator 在可打印体积上比第四代大 11%，并加入了无线和以太网功能，融合了云计算技术， 不仅支持移动 APP 应用程序，也能通过 APP 应用程序实现打印的远程监控。</p>
<p><img alt="图2.21 MakerBot制作3D模型图" data-src="http://94.191.80.102/bishe/2.21.png" class="lozad"></p>
<p>制作打印3D模型过程为：首先在3Dmax绘制3D模型，保存为x3g文件；然后用Makerbot软件打开x3g模型，设置打印相关参数，最后将将打印文件发送到3D打印机器里面，等待打印，最后出来完整模型。</p>
<p><img alt="图2.22 支撑和支架实物图" data-src="http://94.191.80.102/bishe/2.22.png" class="lozad"></p>
<hr>
<h1 id="软件设计与实现"><a href="#软件设计与实现" class="headerlink" title="软件设计与实现"></a>软件设计与实现</h1><p>软件设计主要分为两个部分：下位机系统软件的设计与实现；上位机系统软件设计与实现。</p>
<hr>
<h2 id="下位机系统软件设计"><a href="#下位机系统软件设计" class="headerlink" title="下位机系统软件设计"></a>下位机系统软件设计</h2><p>下位机系统软件设计主要包括传感器节点部分软件设计，控制器节点部分软件设计，协调器网关部分软件设计。<br>软件开发环境使用到了 Keil μVision5 IDE和IAR For 8051，编程语言为 C语言。</p>
<p><img alt="图3.1 Keil μVision5 IDE软件环境图" data-src="http://94.191.80.102/bishe/3.1.png" class="lozad"></p>
<p>传感器节点和网关协调器的软件开发使用 Keil μVision5 IDE 软件；Keil μVision5 IDE 引入灵活的窗口管理系统，使开发人员能够使用多台监视器，并提供了视觉上的表面对窗口位置的完全控制的任何地方。新的用户界面可以更好地利用屏幕空间和更有效地组织多个窗口，提供一个整洁，高效的环境来开发应用程序。<br>Zigbee节点和协调器的软件开发使用 IAR For 8051 软件；IAR Embedded Workbench For 8051是一套功能强大的C/C++开发工具，广泛支持来自各种制造商的8051设备。软件环境受提供了集成在用户友好的 IDE中的项目管理，编辑器，构建工具和调试器。</p>
<p><img alt="图3.2 IAR For 8051 软件环境图" data-src="http://94.191.80.102/bishe/3.2.png" class="lozad"></p>
<hr>
<h2 id="传感器节点软件设计"><a href="#传感器节点软件设计" class="headerlink" title="传感器节点软件设计"></a>传感器节点软件设计</h2><p>传感器节点部分共有四个，每个工作方式和接口都不同。</p>
<p><img alt="图3.3 传感器节点软件设计流程图" data-src="http://94.191.80.102/bishe/3.3.png" class="lozad"></p>
<p>温湿度传感器采用单总线方式，光照传感器采用 I2C 方式，CO2 采用串口方式， 土壤湿度采用 ADC 方式。在传感器节点的软件设计中，除了采集传感器数据部分各不相同外，其余部分软件流程一样。<br>首先硬件初始化，与 Zigbee 协调器建立短距离无线通信连接；然后采集传感器数据。因为考虑到降低节点功耗，而且农场传感器数据实时性要求不是很高，所以采取一段时间采集一次数据。判断定时器时间是否到达，然后进行下一次数据采集。</p>
<hr>
<h2 id="控制器节点部分软件设计"><a href="#控制器节点部分软件设计" class="headerlink" title="控制器节点部分软件设计"></a>控制器节点部分软件设计</h2><p>控制器节点总共有四个。本质上是一样的，都是 Zigbee 节点控制 NMOS 开关电路，只是每个 zigbee 节点编号不同。<br>具体流程为：控制节点硬件初始化，然后与 Zigbee 协调器建立网络连接，然后开始判断是否接收到协调器下发的控制指令，假如接收到，就开启控制电器的开关。</p>
<p><img alt="图3.4 控制器节点软件设计流程图" data-src="http://94.191.80.102/bishe/3.4.png" class="lozad"></p>
<hr>
<h2 id="网关协调器软件设计"><a href="#网关协调器软件设计" class="headerlink" title="网关协调器软件设计"></a>网关协调器软件设计</h2><p>网关协调器部分设计相对比较复杂，也是承载整个设计的中心点，协调云端服务器和底层传感器顺利地数据交互。<br>软件流程为：首先硬件初始化，通过 ESP8266 模块与网络服务器建立 TCP 连接； 然后进入两个串口定时器中断，一个中断来判断是否接收到节点传感器数据，如接收到，就将传感器数据打包，然后发送到云端服务器；如没有收到节点传感器数据么就发送一个心跳数据包，仍然与服务器保持网络连接。</p>
<p><img alt="图3.5 网关与协调器软件设计流程图" data-src="http://94.191.80.102/bishe/3.5.png" class="lozad"></p>
<p>另一个串口定时器中断来判断是否接收到服务器下发的控制数据包，假如接收到控制数据包，那么发送相应的控制指令到对应的Zigbee节点。</p>
<hr>
<h2 id="上位机软件设计"><a href="#上位机软件设计" class="headerlink" title="上位机软件设计"></a>上位机软件设计</h2><p>上位机软件设计包括：物联网服务器的选择与设计；Android 软件开发；PC端软件开发。Android APP 软件开发使用Android Studio IDE，编程语言为Java语言和XML 语言；PC端HTML5 软件开发选择 Sublime Text3，编程语言为HTML5，CSS和JS语言。</p>
<hr>
<h2 id="物联网服务器的选择与设计"><a href="#物联网服务器的选择与设计" class="headerlink" title="物联网服务器的选择与设计"></a>物联网服务器的选择与设计</h2><p>现在物联网技术越来越成熟起来，诞生了很多比较完善的物联网解决方案，本毕业设计选择中国移动的ONENET云平台。</p>
<p><img alt="图3.6  OneNet云服务器后台界面" data-src="http://94.191.80.102/bishe/3.6.png" class="lozad"></p>
<p>OneNET 平台作为中国移动通信集团推出的专业物联网开放云平台，提供了丰富的智能硬件开发工具和可靠的服务，助力各类终端设备迅速接入网络，实现数据传输、数据存储、数据管理等完整的交互。<br>OneNET 的接入协议包括 EDP、MQTT、TCP 透传等，主要是面向通过 TCP 与OneNET直连的终端，OneNET 将接收到的数据按照协议解包存储，并以 API 的方式提供给应用层使用。<br>ONENET 支持 EDP 网络协议，可以上传很大容量的数据流，比如图片数据流，GPS位置信息，时间信，传感器数据流等；最重要的是支持友好的应用编辑界面， 用户上传后，可以在应用界面自由编辑想要的界面，Onenet 支持按钮,地图，柱状图，折线图等选多插件，是现在物联网云平台做的比较完善的支持方案。</p>
<hr>
<h2 id="PC上位机的软件开发"><a href="#PC上位机的软件开发" class="headerlink" title="PC上位机的软件开发"></a>PC上位机的软件开发</h2><p>在电脑终端界面选择上，是有多种选择方案的，比如 MFC, Windows Form 等应用，虽然这些应用原生性比较好，但是我们要考虑用户使用的兼容性。这些都是应用在 Windows 系统上的，比如某个客户用的是个人电脑是 Linux 系统或者苹果系统， 就会存在问题，所以经过思考，最后选择了 H5 作为开发界面，这样用户只要有浏览器就可以访问网页了。<br>HTML5界面开发软件采用Sublime Text，可用于Mac，Windows和Linux。无论使用何种操作系统，Sublime Text具有强大的 Python API，允许插件增强内置功能。<br>Sublime Text使用自定义UI工具包，针对速度和美观进行了优化，同时利用每个平台上的本地功能。</p>
<p><img alt="图3.7 HTML5界面的开发" data-src="http://94.191.80.102/bishe/3.7.png" class="lozad"></p>
<p>HTML5 开发界面有比较多的插件，这些插件功能强大而且美观；在本毕业设计中运用了按钮插件，折线图，图像插件和表盘插件。<br>四个按钮插件通过 JS 语言控制功能，向服务器发送命令，修改命令数据流的值， 然后通过 EDP 协议，下发到网关，控制我们的控制器节点可以控制灯光，通风和灌溉。按钮有两个状态，ON 和 OFF，如果是 EDP 设备，开关控件将会向设备下发上面设置的开关开值，或者关值，否则会把开关关值作为数据点新增到数据流。开关设备需要实时上报数据点来表明当前的开关状态。开关设备的命令内容是“NAME：{V}”，NAME 表示控制器的数据流名称，’V’有两个值，’0’代表关值，’1’ 代表开值。<br>折线图也是JS控件，通过访问服务器传感器数据流，将特定的值显示到相关位置，展示的数据有温湿度，土壤湿度，光照强度等数据。图像区展示树莓派传输的图片，显示农作物的生长情况。<br>图片控件有三种模式，第一种，上传什么图片显示什么图片。第二种，根据数据流设置后得到的数据流链接来显示图片。第三种，上传多张图片，并且给每张图片给定一个值，根据数据流返回的值与设定的值做比较来确定哪张图显示。本毕设采用的形式为第二种，使用树莓派高清摄像头采集图像，然后将图片转换成BMP格式封装到HTTP协议，上传到图像数据流，最后显示在相关图片控件上。</p>
<hr>
<h2 id="Android-软件开发"><a href="#Android-软件开发" class="headerlink" title="Android 软件开发"></a>Android 软件开发</h2><p>Android 软件开发使用Android Studio。Android Studio基于Gradle的构建，支持Android 专属的重构和快速修复，提示工具以捕获性能、可用性、版本兼容性等问题，支持ProGuard和应用签名，基于模板的向导来生成常用的Android应用设计和组件功能强大的布局编辑器，可以拖拉UI控件并进行效果预览。我们可以使用这个软件来完成安卓开发，所需要掌握的编程语言为XML界面编程语言和JAVA语言。</p>
<p><img alt="图3.8 Android程序开发界面" data-src="http://94.191.80.102/bishe/3.8.png" class="lozad"></p>
<p>安卓客户端的制作方便客户远程观测农场数据和操控农场环境。当客户外出可以观看和控制农场大棚情况。<br>安卓软件流程为首先初始化界面等 API，然后与服务器建立 TCP 网络连接；接下来如果 Button 发送控制命令，就用 POST 方法发送相应数据包到服务器；同时android 端也会不断向服务器用 GET 方法访问数据，最后显示到界面。</p>
<p><img alt="图3.9 APP开发软件流程图" data-src="http://94.191.80.102/bishe/3.9.png" class="lozad"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">查询单个数据流方法:</span><br><span class="line">&#123;</span><br><span class="line">	&quot;errno&quot;: 0, &quot;error&quot;:“succ”, &quot;data&quot;: //数据流信息</span><br><span class="line">	&#123;</span><br><span class="line">		&quot;id&quot;:&quot;temperature&quot;, //数据流名称，设备范围内唯一&quot;tags&quot;:[&quot;Tag1&quot;,&quot;Tag2&quot;], //数据流标签</span><br><span class="line">		&quot;unit&quot;:&quot;celsius&quot;, //单位&quot;unit_symbol&quot;:&quot;C&quot;, //单位符号</span><br><span class="line">		&quot;create_time&quot;:&quot;xxxx-xx-xx 10:22:22&quot;, //创建时间&quot;current_value&quot;:&#123;…&#125;, //该数据流下数据点最新值&quot;update_at&quot;:&quot;xx-xx-xx&quot; //该数据流下数据点最新上传时间</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">HTTP 方法 POST 数据</span><br><span class="line">URL	//api.heclouds.com/devices/device_id/datastreams</span><br><span class="line">HTTP   api-key:   242RprHyALimOZLCKiXeT7IRdLM=   //masterkey  或者设备 </span><br><span class="line">apikey</span><br><span class="line">&#123;</span><br><span class="line">	&quot;id&quot;:&quot;temperature&quot; //数据流名称 示例：温度&quot;tags&quot;:[&quot;Tag1&quot;,&quot;Tag2&quot;], //数据流标签（可选，可以为一个或多个） &quot;unit&quot;:&quot;celsius&quot;, //单位（可选）</span><br><span class="line">	&quot;unit_symbol&quot;:&quot;C&quot; //单位符号（可选）</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="调试及调试结果"><a href="#调试及调试结果" class="headerlink" title="调试及调试结果 "></a>调试及调试结果 </h1><p>本部分主要介绍了本课题设计中软件和硬件的调试。硬件调试部分阐述了从底层的焊接和电路布线的调试，软件调试部分阐述了软件设计时编写程序遇到问题的和解决问题的一些过程。<br>调试遇到的问题：<br>1.布线电流大小与线宽的问题<br>解决方法：在一开始设计布线过程中，没有考虑电流问题，所以设计的第一款芯片在回来焊接调试过程中，大电流通过 10mil 的线宽时，有轻微发热现象，询问老师， 并且在网上查找资料后，了解到线宽与电流有着比较重要的关系，一般来说，电流越大，设计线宽也应该越大。<br>PCB 铜厚为 35um；所以想要通过 2A 电流至少保证线宽为 0.8 毫米以上， 在老师指导下，又设计了第二款 PCB 供电板，这次没有发热，而且电器能正常运行， 感觉解决了问题，而且学习到了新的知识。<br>2.微小芯片的焊接方法<br>对于STMf103 这种比较小的芯片没有怎么焊接过，封装为 LQFP 的 64 引脚封装； 不是很容易焊。对照网上视频多练习了几遍，完成就比较顺利了。<br>系统整体供电解决方案<br>本设计电子模块较多，每个模块供电情况不同；STM32 供电需要 3.3V，各个传感器模块需要 5V，电机和灯需要 12V，0.8A 的大电流；树莓派需要 5V 2A 的电流； 所以评估过后采用 12V 开关电源，进行降压对各个模块供电。</p>
<p><img alt="图4.2 实物图" data-src="http://94.191.80.102/bishe/4.2.png" class="lozad"></p>
<hr>
<h1 id="结-论"><a href="#结-论" class="headerlink" title="结 论"></a>结 论</h1><p>本设计从选题、论证、查阅相关资料、确定设计方案到设计的实现前后共历时近两个月，并且基本实现了预期效果，可以远程监控农业大棚模型的温湿度，光照等环境参数；能够远程控制大棚模型中光照，灌溉以及排气。完成硬件大棚模型一个，软件上位机两个。<br>因为在毕设工作量大，总共经历了以下几个过程，一.设计总方案；二.设计各个模块方案;三.设计底层传感器电路 PCB；四.焊接底层传感器 PCB；五.调试底层各个传感器程序；六.调试 CC2530 Zigbee 模块节点程序；七. 调试 CC2530 Zigbee 模块协调器程序；八.调试 STM 网关程序；九.调试设置云端服务器相关程序；十.调试安卓端程序和 H5 上位机程序；十一.设计 CAD 亚克力外壳，设计 3D 打印支架；十二.安装总体结构。<br>在这些过程中有大部分是比较熟悉的，比如调试程序和画电路，以及 H5 上位机编写等。还有很多设计不是很深的技术；比如 PCB 绘制，和微小元器件的焊接，大三的时候学习了部分知识，但是没有运用到实际中，毕设把绘制 PCB 这个用到了； 非常感谢姜老师对我的帮助，在画 PCB 的时候告诉我很多快捷的方式，和很多注意事项。涉及 Android 编写程序，所以需要写关于 JAVA 的相关程序，因为本专业是电系信息科学与技术，关于电子方面，所以更加偏向于硬件，本科上没有 JAVA 的相关课程，所以课余时间自学了 JAVA 相关课程，在安卓端写代码就比较方便了，关于本毕设用到的一些 Android 技术都掌握了。因为最后想把本设计实现产品化，制作了智慧农场的沙盘，，沙盘外壳采用了亚克力材料。硬度符合要求，而且透明材料比较美观。<br>学无止境，虽然大四即将毕业了，但是在做本次毕设中还是学习到了很多新的知识，和解决问题的思路思想。只要肯钻研，下功夫，没有什么是完成不了的。<br>本次毕设也就告一段落了，回想自己本次毕设的目的，还是想利用自己所学到一些知识来为社会做一点微小的贡献，农业生产关系到国家富强，大学生作为国家未来的力量，应当有社会责任感和担当，利用自己所学，为社会去做一点贡献。</p>
<hr>
<h1 id="致-谢"><a href="#致-谢" class="headerlink" title="致 谢"></a>致 谢</h1><p>感谢此次的毕设中给与我无私帮助毕设指导老师杨萍老师，还有智慧城市物联网社团的所有指导老师田景文老师，姜余祥老师，邹莹老师，张争珍老师；大学四年老师们不仅在学业上给予了我宝贵的知识，也在工作生活上对我有许许多多的帮助，最重要的是从他们身上学习到了宝贵的精神品质；做人要谦虚努力，为人正直；做事要精益求精，要有奉献精神；老师们教会我的太多太多，遇到好老师是人一生的幸运， 今后我也会努力工作和学习，传承他们的精神。<br>最后再次感谢杨萍老师，杨萍老师是我的毕设指导老师，也是我大学四年的班主任。在此次的毕设过程中帮助我选题，还有过程中技术的指导，和毕业论文的认真修改，都付出了辛苦的努力，非常感谢杨老师在此次毕设中给予我的指导。</p>
<hr>
<h1 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h1><p>[1] 孔晓波.物联网概念和演进路径[J].电信工程技术与标准化，2009:12 [2]黄松飞.山东寿光的物联网样板[J].通信世界，2009:46<br>[3] 刘志硕.关于我国物联网发展的思考[J].综合运输，2010:2<br>[4] 潘永雄.新编单片机原理与应用.第二版[M].西安电子科技大学出版社[5]杨光祥.STM32 单片机原理与工程实践[M].武汉理工大学出版社,2013:6 [6]华成英.模拟电子技术基础.第四版[M].高等教育出版社<br>[7] 傅劲松.电子制作实例集锦[M].福建科学技术出版社<br>[8] 刘 宏.余勤科.PCB 电路设计实用指南［M］.西安：西安电子科技大学[9]张毅刚.虚拟仪器技术介绍[9].国外电子测量技术,2006,25(6):5-6<br>[10] 夏路易,石宗义.电路原理图与电路板设计教程 Protel 99SE[M].北京广益印刷有限公司,2002:6 </p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined" target="_blank" rel="noopener">Jone-Mark</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://94.191.80.102:4000/2019/11/01/graduation-project/">http://94.191.80.102:4000/2019/11/01/graduation-project/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2019/10/31/%E6%99%BA%E6%85%A7%E5%86%9C%E5%9C%BA%E7%89%A9%E8%81%94%E7%BD%91%E6%A8%A1%E5%9E%8B/"><img class="next_cover lozad" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">Next Post</div><div class="next_info"><span>智慧农场系统</span></div></a></div></nav></div></div><footer style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png)"><div id="footer"><div class="copyright">&copy;2019 By Jone-Mark</div><div class="framework-info"><span>Driven </span><a href="http://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion">简</a><i class="nightshift fa fa-moon-o" id="nightshift" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="Scroll to comment"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="/js/nightshift.js"></script><script id="ribbon" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/js/piao.js"></script><script color="0,0,255" opacity="0.7" zIndex="-1" count="99" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN/js/canvas-nest.js"></script><script src="/js/activate-power-mode.js"></script><script>POWERMODE.colorful = true; // make power mode colorful
POWERMODE.shake = true; // turn off shake
document.body.addEventListener('input', POWERMODE);
</script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();
</script></body></html>